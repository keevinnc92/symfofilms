{# Insertamos la base #}
{% extends 'base.html.twig' %}

{# Aplicamos el titulo #}
{% block title %}Catálogo de películas{% endblock %} 
{% block main %}
	{{ parent() }}
	<h1 class="display-6">Listado de películas</h1>


	<p>A lo largo de las próximas semanas iremos editando este ejemplo para dotarlo de nuevas características y funcionalidades.</p>

	<table class="table table-striped table-bordered">
		<tr>
			<th>ID</th>
			<th>Imagen</th>
			<th>Título</th>
			<th>Duración</th>
			<th>Director</th>
			<th>Género</th>
			<th>Sinopsis</th>
			<th>Estreno</th>
			<th>Valoración</th>
			<th></th>
		</tr>
		{% for pelicula in peliculas %}
			<tr>
				<td>{{pelicula.id}}</td>
				<td>
					<a href="{{path('pelicula_show', {'id':pelicula.id})}}">
						<img class="lista-cover rounded" alt="Carátula de {{pelicula.titulo}}" title="Carátula de {{pelicula.titulo}}" src="{{asset(covers_directory~'/'~(pelicula.caratula ?? 'default.jpg'))}}">
					</a>
				</td>
				<td><b>{{pelicula.titulo}}</b></td>
				<td>{{pelicula.duracion}} min.</td>
				<td>{{pelicula.director}}</td>
				<td>{{pelicula.genero}}</td>
				<td>{{pelicula.sinopsis}}</td>
				<td>{{pelicula.estreno}}</td>
				<td>{{pelicula.valoracion}}</td>


				<td>
					{% if pelicula.valoracion !=NULL %}
						{% for i in 1..5 %}
							{% if i<=pelicula.valoracion %}
								<img src="{{asset('images/samples/estrellaon.gif')}}" alt="{{pelicula.valoracion}}/5" style="height:20px;width: 20px;">
							{% else %}
								<img src="{{asset('images/samples/estrellaoff.gif')}}" alt="{{pelicula.valoracion}}/5" style="height:20px;width: 20px;">
							{% endif %}
						{% endfor %}
					{% else %}
						Sin valorar
					{% endif %}
				</td>


				<td class="text-center">
					<a href="{{path('pelicula_show', {'id':pelicula.id})}}">
						<img  height="20" width="20" src="{{asset('/images/buttons/show.png')}}" alt="Ver detalles" title="Ver detalles">
					</a>
					<a href="{{path('pelicula_edit', {'id':pelicula.id})}}">
						<img  height="20" width="20" src="{{asset('/images/buttons/update.png')}}" alt="Modificar" title="Modificar">
					</a>
					<a href="{{path('pelicula_delete', {'id':pelicula.id})}}">
						<img  height="20" width="20" src="{{asset('/images/buttons/delete.png')}}" alt="Borrar" title="Borrar">
					</a>
					
				</td>
			</tr>
		{% endfor %}
	</table>
{% endblock %}